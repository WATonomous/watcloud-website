# WATcloud website

The [website](https://cloud.watonomous.ca) for WATcloud.

## Contributing

> [!IMPORTANT]  
> The website is deployed via an [internal monorepo](https://github.com/WATonomous/infra-config)
> (you may get a 404 if you are not a WATcloud team member), and the code is mirrored to a
> [public repo](https://github.com/WATonomous/watcloud-website). Pull requests from the public
> repo should be applied to the internal repo by a WATcloud team member.

### Getting started

1. Clone the repo
2. Install dependencies:
    ```bash
    npm install
    ```
3. Run the development server:
    ```bash
    # This line is optional if you are using the internal monorepo
    export FETCH_FIXTURES_FROM=http://cloud.watonomous.ca/fixtures
    npm run dev
    ```

### Image optimization

Images should be added to `public/assets`. To reduce the size of the code base while we work on an image server, images should be optimized before being checked in. To do this, run:

```bash
./node_modules/.bin/optimizt <path_to_image> --avif
```

this will create a `.avif` file next to the original image. Place the optimized image in `public/assets`.

In the code, images should be used like this:

```tsx
import websiteConfig from '@/build/fixtures/website-config.json'
import Picture from '@/components/picture'

<Picture alt="Abstract Computer (Dark)" srcs={["avif","generated.webp","generated.jpg"].map(f => `${websiteConfig.base_path}/assets/<image_name>.${f}`)} />
```

The `.generated.*` files are automatically generated by the build process to provide fallbacks for browsers that don't support AVIF. The `Picture` component allows the browser to choose the best image format for the user's device.
